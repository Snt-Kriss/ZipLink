@model List<User>;

@{
	ViewData["Title"] = "All Users";
}

<div class="container">
	<div class="row row-cols-1 row-cols-md-1 g-4">

		@foreach(var user in Model)
		{
			<div class="col">
				<div class="card">

					<div class="card-body">
						<h5 class="card-title">@user.FullName</h5>
						<p class="card-text">User has @user.Urls.Count link and a total of @user.Urls.Sum(n=> n.NumberOfClicks) clicks</p>

						<p class="d-inline-flex gap-1">
							<a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
								Show Details
							</a>
						</p>
						<div class="collapse" id="collapseExample">
							<div class="card card-body">
								<table class="table table-striped">
									<thead>
										<tr>
											<th>Original Link</th>
											<th>Short Link</th>
											<th>Number of Clicks</th>
										</tr>
									</thead>

									<tbody>
										@foreach(var userUrl in user.Urls)
										{
											<tr>
												<td>@userUrl.OriginalLink</td>
												<td>@userUrl.ShortLink</td>
												<td>@userUrl.NumberOfClicks</td>
											</tr>
										}
										
									</tbody>
								</table>
							</div>
						</div>
					</div>
					<div class="card-footer">
						<small class="text-muted">@user.Urls.Count, @user.Urls.Sum(n => n.NumberOfClicks)</small>
					</div>
				</div>
			</div>
		}
		
	</div>
</div>

